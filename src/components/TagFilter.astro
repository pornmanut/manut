---
import { getCollection } from 'astro:content';
import { Card } from '@/components/ui/card';

const allPosts = await getCollection('blog');
const allTags = [...new Set(allPosts.flatMap(post => post.data.tags))].sort();

export interface Props {
	currentTag?: string;
}

const { currentTag } = Astro.props;
---

<div class="sticky top-5">
	<Card className="p-6">
		<h3 class="text-lg font-semibold mb-4">Filter by Tags</h3>
		<div class="space-y-2">
			<a 
				href="/" 
				class={`block px-3 py-2 rounded-md text-sm transition-colors ${
					!currentTag 
						? 'bg-primary text-primary-foreground' 
						: 'text-muted-foreground hover:bg-accent hover:text-accent-foreground'
				}`}
			>
				All Posts
			</a>
			{allTags.map((tag) => (
				<a 
					href={`/blog/tag/${tag}`} 
					class={`block px-3 py-2 rounded-md text-sm transition-colors ${
						currentTag === tag 
							? 'bg-primary text-primary-foreground' 
							: 'text-muted-foreground hover:bg-accent hover:text-accent-foreground'
					}`}
				>
					{tag}
				</a>
			))}
		</div>
	</Card>
</div>
