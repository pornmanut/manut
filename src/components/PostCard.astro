---
import type { CollectionEntry } from 'astro:content';

export interface Props {
	post: CollectionEntry<'blog'>;
	showExcerpt?: boolean;
}

const { post, showExcerpt = true } = Astro.props;
const { title, description, pubDate, heroImage, tags } = post.data;
---

<article class="post-card">
	<a href={`/blog/${post.id}/`} class="post-link">
		{heroImage && (
			<div class="post-image">
				<img src={heroImage} alt={title} loading="lazy" />
			</div>
		)}
		<div class="post-content">
			<h2 class="post-title">{title}</h2>
			{showExcerpt && description && (
				<p class="post-excerpt">{description}</p>
			)}
			<div class="post-meta">
				<time datetime={pubDate.toISOString()}>
					{pubDate.toLocaleDateString('en-US', { 
						year: 'numeric', 
						month: 'long', 
						day: 'numeric' 
					})}
				</time>
			</div>
			{tags.length > 0 && (
				<div class="post-tags">
					{tags.map((tag) => (
						<span class="tag">{tag}</span>
					))}
				</div>
			)}
		</div>
	</a>
</article>

<style>
	.post-card {
		background-color: var(--background-color);
		border-radius: 12px;
		overflow: hidden;
		transition: all var(--transition-normal);
		border: 1px solid var(--border-color);
		box-shadow: var(--shadow-sm);
		position: relative;
	}

	.post-card:hover {
		transform: translateY(-4px);
		box-shadow: var(--shadow-lg);
		border-color: var(--border-hover);
	}

	.post-link {
		display: block;
		text-decoration: none;
		color: inherit;
	}

	.post-image {
		width: 100%;
		height: 200px;
		overflow: hidden;
		position: relative;
	}

	.post-image::after {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: linear-gradient(to bottom, transparent 60%, rgba(0, 0, 0, 0.1));
		opacity: 0;
		transition: opacity var(--transition-normal);
	}

	.post-card:hover .post-image::after {
		opacity: 1;
	}

	.post-image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		transition: transform var(--transition-slow);
	}

	.post-card:hover .post-image img {
		transform: scale(1.05);
	}

	.post-content {
		padding: 28px;
	}

	.post-title {
		font-family: var(--font-ui);
		font-size: 1.5rem;
		font-weight: 700;
		line-height: 1.2;
		margin-bottom: 12px;
		color: var(--primary-color);
		letter-spacing: -0.025em;
		transition: color var(--transition-fast);
	}

	.post-card:hover .post-title {
		color: var(--accent-color);
	}

	.post-excerpt {
		color: var(--secondary-color);
		margin-bottom: 16px;
		display: -webkit-box;
		-webkit-line-clamp: 3;
		-webkit-box-orient: vertical;
		overflow: hidden;
		line-height: 1.5;
		font-size: 0.95rem;
	}

	.post-meta {
		font-family: var(--font-ui);
		font-size: 0.9rem;
		color: var(--subtle-text);
		margin-bottom: 16px;
		display: flex;
		align-items: center;
		gap: 8px;
	}

	.post-meta::before {
		content: 'ðŸ“…';
		font-size: 0.85rem;
	}

	.post-tags {
		display: flex;
		flex-wrap: wrap;
		gap: 8px;
	}

	.tag {
		background-color: var(--card-background);
		color: var(--secondary-color);
		padding: 6px 12px;
		border-radius: 16px;
		font-size: 0.8rem;
		font-family: var(--font-ui);
		font-weight: 500;
		border: 1px solid var(--border-color);
		transition: all var(--transition-fast);
	}

	.post-card:hover .tag {
		background-color: var(--card-hover);
		color: var(--primary-color);
		border-color: var(--border-hover);
	}

	.tag:hover {
		background-color: var(--accent-color);
		color: white;
		border-color: var(--accent-color);
	}

	/* Add a subtle gradient overlay on hover */
	.post-card::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, transparent 50%);
		opacity: 0;
		transition: opacity var(--transition-normal);
		pointer-events: none;
		border-radius: 12px;
	}

	.post-card:hover::before {
		opacity: 1;
	}

	@media (max-width: 768px) {
		.post-content {
			padding: 20px;
		}
		
		.post-title {
			font-size: 1.3rem;
		}
		
		.post-image {
			height: 160px;
		}
	}
</style>
